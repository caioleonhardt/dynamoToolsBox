!function(e){var t=function(){"use strict";var e={appName:"Dynamo Tool Box",copyright:"Created by Matheus Barbieri - Contributions by Caio Leonhardt - version 0.2.1"},t={_data:{},setItem:function(e,t){return this._data[e]=String(t)},getItem:function(e){return this._data.hasOwnProperty(e)?this._data[e]:void 0},removeItem:function(e){return delete this._data[e]},clear:function(){return this._data={}}};return localStorage&&(t=localStorage),{config:e,storage:t,datasources:[{value:"/atg/dynamo/service/jdbc/JTDataSource",text:"CORE"},{value:"/atg/dynamo/service/jdbc/SwitchingDataSource",text:"SWITCH"},{value:"/atg/dynamo/service/jdbc/SwitchingDataSourceA",text:"CATALOG_A"},{value:"/atg/dynamo/service/jdbc/SwitchingDataSourceB",text:"CATALOG_B"}]}}();Object.defineProperty(e,"CONSTANTS",{value:function(){var e={};return Object.defineProperty(e,"appName",{value:t.config.appName,writable:!1}),Object.defineProperty(e,"welcomeMessage",{value:"-- Initialized Dynamo Tool Box --",writable:!1}),e}(),writable:!1}),e.DynamoToolBox=t}(window),function(window,unsafeWindow,DynamoToolBox){"use strict";var render=function(){function renderHtmlTags(html,data){for(var regex=/\{\{([a-zA-Z1-9\.]*)\}\}/g,str=html,replacedString=str,match;null!==(match=regex.exec(str));)if(match.index===regex.lastIndex&&regex.lastIndex++,match[0]){var replaceText=match[0];try{var replaceValue=eval(match[1]);replaceValue||(replaceValue=""),replacedString=replacedString.replace(replaceText,replaceValue)}catch(e){replacedString=replacedString.replace(replaceText,"")}}return replacedString}return{renderHtmlTags:renderHtmlTags}}();DynamoToolBox.render=render}(window,unsafeWindow,DynamoToolBox),function(e,t,n){"use strict";var a=function(){return{invoke:function(e,t,n){var a=new XMLHttpRequest,e=e;if(t){for(var o="?",i=Object.keys(t),r=0;r<i.length;r++){r>0&&(o+="&");var l=i[r];o+=l+"="+t[l]}e+=o}a.open("POST",e,!0),a.setRequestHeader("Content-type","application/json; charset=utf-8"),a.setRequestHeader("Connection","close"),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&n&&n(a)},a.send()}}}();n.request=a}(window,unsafeWindow,DynamoToolBox),function(e,t,n){"use strict";var a=function(){var e=[];return{remove:function(){var e=document.getElementById("dynamoTools");e&&document.body.removeChild(e)},toggleView:function(){var e=document.getElementById("contentToolsBox"),t=event.target;if(e&&t){if(e.classList.contains("hide"))return n.storage.setItem("minimizedToolBox",!1),e.classList.remove("hide"),void(t.innerText="-");n.storage.setItem("minimizedToolBox",!0),t.innerText="+",e.classList.add("hide")}},isJDBCPage:function(){return/jdbcbrowser\/executeQuery.jhtml/.test(location.pathname)},isNucleusPage:function(){return/\/nucleus\//.test(location.pathname)},isRepositoryPage:function(){return/\/nucleus\/.*Repository|.*Catalog/.test(location.pathname)},validateHide:function(){"true"==n.storage.getItem("minimizedToolBox")&&document.getElementById("contentToolsBox").classList.add("hide")},addComponentBox:function(){var e=n.render.renderHtmlTags('<div id="dynamoTools" class="dynamoToolsBox"><h3>{{DynamoToolBox.config.appName}}<span class="navigation remove" id="removeToolBox">X</span><span class="navigation toogle" id="toogleToolBox">-</span></h3><div><ul id="contentToolsBox"></ul></div></div>');document.body.innerHTML+=e},resolvedPathName:function(){return location.pathname.endsWith("/")?location.pathname:location.pathname+"/"},createElement:function(e,t,n,a,o){var i=document.body;o&&(i=document.getElementById(o));var r=document.createElement(e);t&&r.setAttribute("id",t),r.setAttribute("class",n),r.innerHTML=a,i.appendChild(r)},setCaretPosition:function(e,t){null!==e&&(e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus())},executePrettify:function(){var e=!1,t=document.getElementsByTagName("pre");if(t){for(var n=0;n<t.length;n++)t[n].classList.add("prettyprint");e=!0}var a=document.getElementsByTagName("code");if(a)for(var o=0;o<a.length;o++)a[o].classList.add("language-xml");return e&&"undefined"!=typeof PR&&PR.prettyPrint(),e},validateLinks:function(){if(/cmpn-search.jhtml/.test(location.pathname)){var e=document.getElementsByTagName("a");if(e)for(var t=0;t<e.length;t++){var n=e[t];/\/\//.test(n.getAttribute("href"))&&n.setAttribute("href",n.getAttribute("href").replace("//","/"))}}},regularizeString:function(e){return e.replace("<![CDATA[","").replace("]]>","")},isDefinitionFilesPage:function(){return/.*definitionFiles.*/.test(location.search)},loadMethods:function(){var e=document.getElementsByTagName("h1"),t=[];if(e)for(var n=0;n<e.length;n++)if("Methods"==e[n].innerText){var a=e[n].nextElementSibling;if(a){var o=a.getElementsByTagName("tr");if(o)for(var i=0;i<o.length;i++){var r=o[i].getElementsByTagName("td")[0];if(r&&r.getElementsByTagName("a")){var l=r.getElementsByTagName("a")[0],d={value:l.getAttribute("href"),text:l.innerText};t.push(d)}}}}return t},loadItemDescriptors:function(){var t=document.getElementsByName("listItemDescriptors")[0];if(t){var n=t.nextElementSibling.getElementsByTagName("th");if(n)for(var a=0;a<n.length;a++)a>3&&e.push(n[a].innerHTML)}},itensDescriptors:e}}();n.global=a}(window,unsafeWindow,DynamoToolBox),function(e,t,n){"use strict";var a=function(){function t(){var t=document.createElement("style");t.type="text/css";var n="1";e.innerWidth<2e3&&(n="0.8"),e.innerWidth<=1440&&(n="0.7");var a=".dynamoToolsBox{position:fixed;top:0;right:-1px;width:500px;background-color:#545454;border:3px solid #545454;overflow:hidden;zoom:"+n+"}.dynamoToolsBox h3{color:#fff;text-align:center;margin:10px}.dynamoToolsBox .navigation{position:absolute;top:0;background-color:#696969;cursor:pointer;width:41px;height:41px;text-align:center;vertical-align:middle;line-height:41px}.dynamoToolsBox .remove{right:0}.dynamoToolsBox .toogle{right:42px}.dynamoToolsBox ul{list-style:none;margin:0;padding:0}.dynamoToolsBox li{border-bottom:2px solid #dcdcdc;background-color:#fdfdfd;display:inline-block;width:100%;padding:10px}.dynamoToolsBox .hide{display:none}.dynamoToolsBox .info label{float:left;font-weight:700}.dynamoToolsBox .info div{float:left}.dynamoToolsBox .green{background-color:#abffa5}.dynamoToolsBox .red{background-color:red}.dynamoToolsBox .info h3{color:#2d2d2d;font-size:20px;margin:0}.dynamoToolsBox .execute label{float:left;font-weight:700}.dynamoToolsBox .execute div{float:left}pre.prettyprint{padding:0!important;border:0!important}.dynamoToolsBox .copyright p{padding:0;font-size:11px;margin:0;text-align:right;padding-right:20px}.atv{cursor:pointer}.dynamoToolsBox .autocomplete{background-color:#eaeaea;width:95%;border:1px solid #c1c1c1;border-top:0;overflow:hidden;display:none}.dynamoToolsBox .autocomplete.visible{display:block}.dynamoToolsBox .autocomplete span{width:100%;display:inline-block;padding:3px}.dynamoToolsBox .autocomplete span.active{background-color:#fff;color:#009}.itemDescActions{display:none;position:absolute;background:#fff;border:1px solid #898989;width:106px;left:79px;text-transform:capitalize;cursor:pointer}.itemDescActions div{padding:3px;color:#000}.itemDescActions div:hover{background-color:#f3f3f3}.itenDescAutoComplete:hover .itemDescActions{display:block}.dynamoToolsBox .favorites{background-color:#ececec;padding-top:0}.dynamoToolsBox .favorites a{width:100%;display:inline-block;padding:5px 0}";t.styleSheet?t.styleSheet.cssText=a:t.appendChild(document.createTextNode(a)),document.getElementsByTagName("head")[0].appendChild(t)}return t(),{injectPretify:function(){var e=document.createElement("script");e.src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js",e.defer=!0,document.getElementsByTagName("head")[0].appendChild(e)}}}();n.inject=a}(window,unsafeWindow,DynamoToolBox),function(e,t,n){"use strict";var a=function(){function e(){var e=event.target,t=e.value;if(0!=t.length){var n=e.parentNode,a=e.getAttribute("id"),o="auto"+a,l=!0,d=document.getElementById(o);d||(l=!1,d=document.createElement("DIV"),o&&d.setAttribute("id",o),d.setAttribute("targetId",a),d.setAttribute("class","autocomplete js-autocomplete visible"));var c="";for(var s in i)i[s].startsWith(t)&&(c+="<span>"+i[s]+"</span>");d.innerHTML=c,r=!0,l?d.classList.add("visible"):n.appendChild(d)}}function t(){document.body.addEventListener("keyup",function(e){r&&a(e)})}function a(e){var t=!1,n=!1;if("38"==e.keyCode&&(l>0&&l--,t=!0),"40"==e.keyCode&&(l<d-1&&l++,t=!0),"13"==e.keyCode&&(n=!0),"9"==e.keyCode&&(c=!0,o()),t||n){var a=document.getElementsByClassName("js-autocomplete");if(a)for(var i=0;i<a.length;i++){var r=a[i];if(r.classList.contains("visible")){var s=r.getElementsByTagName("span");if(d=s.length,s){if(n){var u=r.getAttribute("targetId"),m=document.getElementById(u);if(m){var v=s[l];v&&(m.value=v.innerText,c=!0,o())}return}for(var g=0;g<s.length;g++){var p=s[g];p.classList.remove("active"),g==l&&p.classList.add("active")}}}}}}function o(){var e=document.getElementsByClassName("js-autocomplete");if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n){var a=event.target;if(!c&&a&&a.getAttribute("id")==n.getAttribute("targetId"))break;c=!1,n.classList.remove("visible"),r=!1,l=0,d=0}}}var i=n.global.itensDescriptors,r=!1,l=0,d=0,c=!1;return{initAutoComplete:function(){n.global.loadItemDescriptors(),t();var a=document.getElementById("dynamoTools").getElementsByTagName("input");if(document.body.addEventListener("click",o),a)for(var i=0;i<a.length;i++){var r=a[i];"true"==r.getAttribute("autocomplete")&&(r.addEventListener("keyup",e),r.addEventListener("focus",e))}}}}();n.autocomplete=a}(window,unsafeWindow,DynamoToolBox),function(e,t,n){"use strict";var a=function(){return{addEventListeners:function(){var e=document.getElementById("removeToolBox");e&&e.addEventListener("click",n.global.remove);var t=document.getElementById("toogleToolBox");t&&t.addEventListener("click",n.global.toggleView),document.body.addEventListener("keypress",function(e){n.event.invokeKeyEvent(e)})},invokeKeyEvent:function(e){if(e&&e.ctrlKey){if(e.shiftKey&&6==e.keyCode){var t=document.getElementById("searchMethod");if(t){var a=t.parentElement;if(a){var o=a.getElementsByTagName("input")[0].focus();o&&o.focus()}}}if(10==e.keyCode&&!n.global.isJDBCPage()){var i=document.getElementsByTagName("textarea")[0];if(i){var r=i.parentElement.parentElement;"FORM"==r.nodeName&&r.submit()}}}},addItemDescriptorEvent:function(){var e=setInterval(function(){var t=document.getElementsByClassName("atn");if(t[0]){clearInterval(e);for(var a=0;a<t.length;a++){var o=t[a];if("item-descriptor"==o.innerText){var i=o.nextElementSibling.nextElementSibling.innerHTML.replace(/\"/g,""),r=o.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling;if("id"==r.innerText){var l=r.nextElementSibling.nextElementSibling.innerText.replace(/\"/g,"");o.classList.add("itenDescAutoComplete");var d={replacedId:l,itemDesc:i},c=n.render.renderHtmlTags('<div class="itemDescActions" data-id="{{data.replacedId}}" data-itemdesc="{{data.itemDesc}}"><div id="remove_{{data.replacedId}}">remove</div><div id="update_{{data.replacedId}}">update</div><div id="print_{{data.replacedId}}">print</div></div>',d);o.innerHTML+=c,document.getElementById("remove_"+l).addEventListener("click",n.event.removeItemDescEvent),document.getElementById("update_"+l).addEventListener("click",n.event.updateItemDescEvent),document.getElementById("print_"+l).addEventListener("click",n.event.printItemDescEvent)}}}}},300)},removeItemDescEvent:function(e){var t=e.target.parentElement,n=t.getAttribute("data-id"),a='<remove-item item-descriptor="'+t.getAttribute("data-itemdesc")+'" id="'+n+'"/>',o=document.getElementsByTagName("textarea")[0];if(o){var i="\n";i+=a,o.value+=i,o.focus()}},updateItemDescEvent:function(e){var t=e.target.parentElement,n=t.getAttribute("data-id"),a='<update-item item-descriptor="'+t.getAttribute("data-itemdesc")+'" id="'+n+'">';a+='\n\t<set-property name=""><![CDATA[]]></set-property>',a+="\n</update-item>";var o=document.getElementsByTagName("textarea")[0];if(o){var i="\n";i+=a,o.value+=i,o.focus()}},printItemDescEvent:function(e){var t=e.target.parentElement,n=t.getAttribute("data-id"),a='<print-item item-descriptor="'+t.getAttribute("data-itemdesc")+'" id="'+n+'"/>',o=document.getElementsByTagName("textarea")[0];if(o){var i="\n";i+=a,o.value+=i,o.focus()}},addPropertyEvent:function(){var e=document.getElementsByClassName("atv");if(e&&!n.global.isDefinitionFilesPage())for(var t=0;t<e.length;t++){var a=e[t],o=a.previousElementSibling.previousElementSibling.innerHTML;"id"!=o&&"item-descriptor"!=o&&a.addEventListener("click",n.event.populatePropertyQuery)}},populatePropertyQuery:function(e){var t=e.target,a=t.nextElementSibling.nextElementSibling;if(a){var o=document.getElementsByTagName("textarea")[0];if(o){var i=o.value;i+="\n";var r=n.global.regularizeString(a.innerText);if(r.indexOf(",")>0)for(var l=r.split(","),d=0;d<l.length;d++)i+="<print-item item-descriptor="+t.innerText+' id="'+l[d]+'"/>',i+="\n";else i+="<print-item item-descriptor="+t.innerText+' id="'+r+'"/>';o.value=i,o.focus()}}}}}();n.event=a}(window,unsafeWindow,DynamoToolBox),function(e,t,n){"use strict";function a(){var n=!1;h("whereAmI","info green","");var a=0,o=setInterval(function(){if(a++,t.mappedHosts&&t.mappedHosts.size>0){var i=e.location.host;t.mappedHosts&&t.mappedHosts.get(e.location.host)&&(i=t.mappedHosts.get(e.location.host).name,n=t.mappedHosts.get(e.location.host).production),document.getElementById("whereAmI")&&(document.getElementById("whereAmI").innerHTML="<h3>"+i+"</h3>",n&&(document.getElementById("whereAmI").classList.remove("green"),document.getElementById("whereAmI").classList.add("red"))),clearInterval(o)}a>10&&clearInterval(o)},300)}function o(){x("copyright","info copyright",n.config.copyright)}function i(){var e=document.getElementsByTagName("textarea")[0];e&&T("descTable","Desc table","Table Name",function(){var t=event.target.parentNode.getElementsByTagName("input")[0];if(t&&t.value){var n="SELECT table_name, column_name, data_type FROM ALL_TAB_COLUMNS WHERE TABLE_NAME like '"+t.value.toUpperCase()+"'";e.value=n,e.focus()}},!1)}function r(){var e=document.getElementsByTagName("textarea")[0];e&&B("printItem","Print Item","Item Descriptor","Value",function(){var t=event.target.parentNode.getElementsByTagName("input");if(t[0]&&t[0].value&&t[1]&&t[1].value){var n=e.value;n+="\n",n+='<print-item item-descriptor="'+t[0].value+'" id="'+t[1].value+'"/>',e.value=n,e.focus()}},!0)}function l(){var e=document.getElementsByTagName("textarea")[0];e&&T("queryItem","Query Item","Item Descriptor",function(){var t=event.target.parentNode.getElementsByTagName("input")[0];if(t&&t.value){var a=e.value;a+="\n",a+='<query-items item-descriptor="'+t.value+'"> = ""</query-items>',e.value=a}setTimeout(function(){n.global.setCaretPosition(e,a.lastIndexOf("> =")+1)},10)},!0)}function d(){T("setPropertyDescriptor","See property description","Item Descriptor",function(){var t=event.target.parentNode.getElementsByTagName("input")[0];if(t&&t.value){var a=n.global.resolvedPathName()+"?action=seetmpl&itemdesc="+t.value+"#showProperties";e.location=a}},!0)}function c(){document.getElementsByTagName("textarea")[0]&&B("seeItem","See Item","Item Descriptor","Value",function(){var t=event.target.parentNode.getElementsByTagName("input");if(t[0]&&t[0].value){var a=n.global.resolvedPathName()+"?action=seeitems&itemdesc="+t[0].value;t[1]&&t[1].value&&(a+="&itemid="+t[1].value),a+="#seeItems",e.location=a}},!0,!0)}function s(){E("invokeMethod","Invoke Method",n.global.loadMethods(),function(e){var t=e.target;t&&t.value&&(location=t.value)})}function u(){var e={id:"viewServiceConfiguration",label:"View Service Configuration",url:n.global.resolvedPathName()+"?propertyName=serviceConfiguration"},t=n.render.renderHtmlTags('<div><label>{{data.label}}:&nbsp;</label><a id="{{data.id}}" href="{{data.url}}">GOTO</a></div>',e);n.global.createElement("LI",null,"execute",t,"contentToolsBox")}function m(){var e={id:"viewDefinitionFiles",label:"View Service Definition",url:n.global.resolvedPathName()+"?propertyName=definitionFiles"},t=n.render.renderHtmlTags('<div><label>{{data.label}}:&nbsp;</label><a id="{{data.id}}" href="{{data.url}}">GOTO</a></div>',e);n.global.createElement("LI",null,"execute",t,"contentToolsBox")}function v(){var e={id:"viewComponent",label:"View  Component",url:n.global.resolvedPathName()},t=n.render.renderHtmlTags('<div><label>{{data.label}}:&nbsp;</label><a id="{{data.id}}" href="{{data.url}}">GOTO</a></div>',e);n.global.createElement("LI",null,"execute",t,"contentToolsBox")}function g(){var e={id:"executeQuery",label:"Execute  Query",url:"/dyn/admin/atg/dynamo/admin/en/jdbcbrowser/executeQuery.jhtml"},t=n.render.renderHtmlTags('<div><label>{{data.label}}:&nbsp;</label><a id="{{data.id}}" href="{{data.url}}">GOTO</a></div>',e);n.global.createElement("LI",null,"execute",t,"contentToolsBox")}function p(){T("searchMethod","Search Component","Query",function(){var t=event.target.parentNode.getElementsByTagName("input")[0];if(t&&t.value){var n="/dyn/admin/atg/dynamo/admin/en/cmpn-search.jhtml?query="+t.value;e.location=n}},!1)}function f(){var e=setInterval(function(){n.global.executePrettify()&&(n.event.addItemDescriptorEvent(),setTimeout(function(){n.event.addPropertyEvent()},500),clearInterval(e))},300)}function y(){var e="favoriteLinks";n.global.createElement("LI",e,"favorites","","contentToolsBox");var a=0,o=setInterval(function(){if(a++,t.favorites){clearInterval(o);for(var n="",i=0;i<t.favorites.length;i++){var r=t.favorites[i];n+='<a href="/dyn/admin/nucleus'+r+'">'+r+"</a>"}document.getElementById(e).innerHTML=n}a>10&&clearInterval(o)},300)}function b(){var e=n.datasources,a=0,o=setInterval(function(){if(a++,t.datasources&&(clearInterval(o),t.datasources&&t.datasources.length>0))for(var e=0;e<t.datasources.length;e++){var n=t.datasources[e],i='<option value="'+n.value+'">'+n.text+"</option>";document.getElementById("switchDataSource").innerHTML+=i}a>10&&clearInterval(o)},300);E("switchDataSource","Switch Data Source",e,function(e){var t=e.target;if(t&&t.value){var a={propertyName:"connectionPool",newValue:t.value,change:"Change Value"};n.request.invoke("/dyn/admin/nucleus/atg/dynamo/admin/jdbcbrowser/ConnectionPoolPointer/",a,null)}})}function h(e,t,a){var o="<h3>"+a+"</h3>";n.global.createElement("LI",e,t,o,"contentToolsBox")}function x(e,t,a){var o="<p>"+a+"</p>";n.global.createElement("LI",e,t,o,"contentToolsBox")}function T(e,t,a,o,i){var r={id:e,label:t,placeholder:a,autcomplete:i,inputId:"input"+e+(new Date).getTime()},l=n.render.renderHtmlTags('<div><label>{{data.label}}&nbsp;</label><input type="text" placeholder="{{data.placeholder}}" autocomplete="{{data.autcomplete}}" id="{{data.inputId}}"><button id="{{data.id}}">OK</button></div>',r);n.global.createElement("LI",null,"execute",l,"contentToolsBox"),document.getElementById(e).addEventListener("click",o);var d=document.getElementById(e).parentNode.getElementsByTagName("input")[0];d&&d.addEventListener("keydown",function(t){13==t.keyCode&&setTimeout(function(){document.getElementById(e).click()},300)})}function E(e,t,a,o){if(!(a.length<1)){var i="<div><label>"+t+':&nbsp;</label><select id="'+e+'"><option value="">Selecione</option>';if(a)for(var r=0;r<a.length;r++)i+='<option value="'+a[r].value+'">'+a[r].text+"</option>";i+="</select></div>",n.global.createElement("LI",null,"execute",i,"contentToolsBox"),document.getElementById(e).addEventListener("change",o)}}function B(e,t,a,o,i,r,l){var d={id:e,label:t,placeholder1:a,placeholder2:o,autocomplete:r,inputId1:"input1"+e+(new Date).getTime(),inputId2:"input2"+e+(new Date).getTime()},c=n.render.renderHtmlTags('<div><label>{{data.label}}&nbsp;</label><input type="text" placeholder="{{data.placeholder1}}" autocomplete="{{data.autocomplete}}" id="{{data.inputId1}}"><input type="text" placeholder="{{data.placeholder2}}" id="{{data.inputId2}}"><button id="{{data.id}}">OK</button></div>',d);n.global.createElement("LI",null,"execute",c,"contentToolsBox"),document.getElementById(e).addEventListener("click",i);var s=document.getElementById(e).parentNode.getElementsByTagName("input");if(s)for(var u=0;u<s.length;u++)l||s[u].addEventListener("keydown",function(t){13==t.keyCode&&setTimeout(function(){document.getElementById(e).click()},100)})}function I(){n.global.isJDBCPage()&&(n.inject.injectPretify(),i(),b())}function w(){n.global.isNucleusPage()&&(v(),u(),s()),n.global.isRepositoryPage()&&(n.inject.injectPretify(),m(),r(),l(),c(),d(),f(),n.autocomplete.initAutoComplete())}n.global.remove(),n.global.addComponentBox(),n.global.validateHide(),a(),p(),g(),I(),w(),n.event.addEventListeners(),y(),o(),n.global.validateLinks(),e.console&&console.info&&console.info(CONSTANTS.welcomeMessage)}(window,unsafeWindow,DynamoToolBox);