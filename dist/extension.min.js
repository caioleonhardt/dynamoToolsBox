!function(e){var t=function(){"use strict";return{config:{appName:"Dynamo Tool Box",copyright:"Created by Matheus Barbieri - Contributions by Caio Leonhardt - version 0.2.0"}}}();Object.defineProperty(e,"CONSTANTS",{value:function(){var e={};return Object.defineProperty(e,"appName",{value:t.config.appName,writable:!1}),Object.defineProperty(e,"welcomeMessage",{value:"-- Initialized Dynamo Tool Box --",writable:!1}),e}(),writable:!1}),e.DynamoToolBox=t}(window),function(e,t,n){"use strict";function o(){var e=document.createElement("script");e.src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js",e.defer=!0,document.getElementsByTagName("head")[0].appendChild(e)}function a(){var e=document.getElementById("dynamoTools");e&&document.body.removeChild(e)}function i(){var e=document.getElementById("contentToolsBox"),t=event.target;if(e&&t){if(e.classList.contains("hide"))return $.setItem("minimizedToolBox",!1),e.classList.remove("hide"),void(t.innerText="-");$.setItem("minimizedToolBox",!0),t.innerText="+",e.classList.add("hide")}}function r(){w("DIV","dynamoTools","dynamoToolsBox","<h3>"+n.config.appName+'<span class="navigation remove" id="removeToolBox">X</span><span class="navigation toogle" id="toogleToolBox">-</span></h3><div><ul id="contentToolsBox"></ul></div>',null)}function l(){var n=!1;E("whereAmI","info green","");var o=0,a=setInterval(function(){if(o++,t.mappedHosts&&t.mappedHosts.size>0){var i=e.location.host;t.mappedHosts&&t.mappedHosts.get(e.location.host)&&(i=t.mappedHosts.get(e.location.host).name,n=t.mappedHosts.get(e.location.host).production),document.getElementById("whereAmI")&&(document.getElementById("whereAmI").innerHTML="<h3>"+i+"</h3>",n&&(document.getElementById("whereAmI").classList.remove("green"),document.getElementById("whereAmI").classList.add("red"))),clearInterval(a)}o>10&&clearInterval(a)},300)}function d(){b("copyright","info copyright",n.config.copyright)}function c(){var e=document.getElementsByTagName("textarea")[0];e&&I("descTable","Desc table","Table Name",function(){var t=event.target.parentNode.getElementsByTagName("input")[0];if(t&&t.value){var n="SELECT table_name, column_name, data_type FROM ALL_TAB_COLUMNS WHERE TABLE_NAME like '"+t.value.toUpperCase()+"'";e.value=n,e.focus()}},!1)}function s(){var e=document.getElementsByTagName("textarea")[0];e&&k("printItem","Print Item","Item Descriptor","Value",function(){var t=event.target.parentNode.getElementsByTagName("input");if(t[0]&&t[0].value&&t[1]&&t[1].value){var n=e.value;n+="\n",n+='<print-item item-descriptor="'+t[0].value+'" id="'+t[1].value+'"/>',e.value=n,e.focus()}},!0)}function m(){var e=document.getElementsByTagName("textarea")[0];e&&I("queryItem","Query Item","Item Descriptor",function(){var t=event.target.parentNode.getElementsByTagName("input")[0];if(t&&t.value){var n=e.value;n+="\n",n+='<query-items item-descriptor="'+t.value+'"> = ""</query-items>',e.value=n}setTimeout(function(){B(e,n.lastIndexOf("> =")+1)},10)},!0)}function u(){I("setPropertyDescriptor","See property description","Item Descriptor",function(){var t=event.target.parentNode.getElementsByTagName("input")[0];if(t&&t.value){var n=K()+"?action=seetmpl&itemdesc="+t.value+"#showProperties";e.location=n}},!0)}function v(){document.getElementsByTagName("textarea")[0]&&k("seeItem","See Item","Item Descriptor","Value",function(){var t=event.target.parentNode.getElementsByTagName("input");if(t[0]&&t[0].value){var n=K()+"?action=seeitems&itemdesc="+t[0].value;t[1]&&t[1].value&&(n+="&itemid="+t[1].value),n+="#seeItems",e.location=n}},!0,!0)}function p(){L("invokeMethod","Invoke Method",g(),function(){var t=event.target.parentNode.getElementsByTagName("input");if(t[0]&&t[0].value){var n=K()+"?shouldInvokeMethod="+t[0].value;e.location=n}})}function g(){var e=document.getElementsByTagName("h1"),t=[];if(e)for(var n=0;n<e.length;n++)if("Methods"==e[n].innerText){var o=e[n].nextElementSibling;if(o){var a=o.getElementsByTagName("tr");if(a)for(var i=0;i<a.length;i++){var r=a[i].getElementsByTagName("td")[0];if(r&&r.getElementsByTagName("a")){var l=r.getElementsByTagName("a")[0],d={value:l.getAttribute("href"),text:l.innerText};t.push(d)}}}}return t}function f(){N("viewServiceConfiguration","View Service Configuration",K()+"?propertyName=serviceConfiguration")}function y(){N("viewDefinitionFiles","View Definition Configuration",K()+"?propertyName=definitionFiles")}function h(){N("viewComponent","View Component",K())}function x(){N("executeQuery","Execute Query","/dyn/admin/atg/dynamo/admin/en/jdbcbrowser/executeQuery.jhtml")}function T(){I("searchMethod","Search Component","Query",function(){var t=event.target.parentNode.getElementsByTagName("input")[0];if(t&&t.value){var n="/dyn/admin/atg/dynamo/admin/en/cmpn-search.jhtml?query="+t.value;e.location=n}},!1)}function B(e,t){null!==e&&(e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus())}function E(e,t,n){w("LI",e,t,"<h3>"+n+"</h3>","contentToolsBox")}function b(e,t,n){w("LI",e,t,"<p>"+n+"</p>","contentToolsBox")}function I(e,t,n,o,a){w("LI",null,"execute","<div><label>"+t+':&nbsp;</label><input type="text" placeholder="'+n+'" autocomplete="'+a+'" id="'+("input"+e+(new Date).getTime())+'"></input><button id="'+e+'">OK</button></div>',"contentToolsBox"),document.getElementById(e).addEventListener("click",o);var i=document.getElementById(e).parentNode.getElementsByTagName("input")[0];i&&i.addEventListener("keydown",function(t){13==t.keyCode&&setTimeout(function(){document.getElementById(e).click()},300)})}function N(e,t,n){w("LI",null,"execute","<div><label>"+t+':&nbsp;</label><a id="'+e+'" href="'+n+'">GOTO</button></div>',"contentToolsBox")}function L(e,t,n,o){if(!(n.length<1)){var a="<div><label>"+t+':&nbsp;</label><select id="'+e+'"><option value="">Selecione</option>';if(n)for(var i=0;i<n.length;i++)a+='<option value="'+n[i].value+'">'+n[i].text+"</option>";w("LI",null,"execute",a+="</select></div>","contentToolsBox"),document.getElementById(e).addEventListener("change",function(e){var t=e.target;t&&t.value&&(location=t.value)})}}function k(e,t,n,o,a,i,r){w("LI",null,"execute","<div><label>"+t+':&nbsp;</label><input type="text" placeholder="'+n+'" autocomplete="'+i+'" data-gotosecond="true" id="'+("input1"+e+(new Date).getTime())+'"></input><input type="text" placeholder="'+o+'" id="'+("input2"+e+(new Date).getTime())+'"></input><button id="'+e+'">OK</button></div>',"contentToolsBox"),document.getElementById(e).addEventListener("click",a);var l=document.getElementById(e).parentNode.getElementsByTagName("input");if(l)for(var d=0;d<l.length;d++)r||l[d].addEventListener("keydown",function(t){13==t.keyCode&&setTimeout(function(){document.getElementById(e).click()},100)})}function w(e,t,n,o,a){var i=document.body;a&&(i=document.getElementById(a));var r=document.createElement(e);t&&r.setAttribute("id",t),r.setAttribute("class",n),r.innerHTML=o,i.appendChild(r)}function A(){var e=document.getElementById("removeToolBox");e&&e.addEventListener("click",a);var t=document.getElementById("toogleToolBox");t&&t.addEventListener("click",i),document.body.addEventListener("keypress",function(e){C(e)})}function C(e){if(e&&e.ctrlKey){if(e.shiftKey&&6==e.keyCode){var t=document.getElementById("searchMethod");if(t){var n=t.parentElement;if(n){var o=n.getElementsByTagName("input")[0].focus();o&&o.focus()}}}if(10==e.keyCode&&!ie){var a=document.getElementsByTagName("textarea")[0];if(a){var i=a.parentElement.parentElement;"FORM"==i.nodeName&&i.submit()}}}}function S(){var e=!1,t=document.getElementsByTagName("pre");if(t){for(var n=0;n<t.length;n++)t[n].classList.add("prettyprint");e=!0}var o=document.getElementsByTagName("code");if(o)for(var a=0;a<o.length;a++)o[a].classList.add("language-xml");return e&&"undefined"!=typeof PR&&PR.prettyPrint(),e}function D(){var e=setInterval(function(){S()&&(R(),z(),clearInterval(e))},300)}function M(){_(),O();var e=document.getElementById("dynamoTools").getElementsByTagName("input");if(document.body.addEventListener("click",P),e)for(var t=0;t<e.length;t++){var n=e[t];"true"==n.getAttribute("autocomplete")&&(n.addEventListener("keyup",H),n.addEventListener("focus",H))}}function _(){var e=document.getElementsByName("listItemDescriptors")[0];if(e){var t=e.nextElementSibling.getElementsByTagName("th");if(t)for(var n=0;n<t.length;n++)n>3&&ee.push(t[n].innerHTML)}}function H(){var e=event.target,t=e.value;if(0!=t.length){var n=e.parentNode,o=e.getAttribute("id"),a="auto"+o,i=!0,r=document.getElementById(a);r||(i=!1,r=document.createElement("DIV"),a&&r.setAttribute("id",a),r.setAttribute("targetId",o),r.setAttribute("class","autocomplete js-autocomplete visible"));var l="";for(var d in ee)ee[d].startsWith(t)&&(l+="<span>"+ee[d]+"</span>");r.innerHTML=l,te=!0,i?r.classList.add("visible"):n.appendChild(r)}}function O(){document.body.addEventListener("keyup",function(e){te&&j(e)})}function j(e){var t=!1,n=!1;if("38"==e.keyCode&&(ne>0&&ne--,t=!0),"40"==e.keyCode&&(ne<oe-1&&ne++,t=!0),"13"==e.keyCode&&(n=!0),"9"==e.keyCode&&(ae=!0,P()),t||n){var o=document.getElementsByClassName("js-autocomplete");if(o)for(var a=0;a<o.length;a++){var i=o[a];if(i.classList.contains("visible")){var r=i.getElementsByTagName("span");if(oe=r.length,r){if(n){var l=i.getAttribute("targetId"),d=document.getElementById(l);if(d){var c=r[ne];c&&(d.value=c.innerText,ae=!0,P())}return}for(var s=0;s<r.length;s++){var m=r[s];m.classList.remove("active"),s==ne&&m.classList.add("active")}}}}}}function P(){var e=document.getElementsByClassName("js-autocomplete");if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n){var o=event.target;if(!ae&&o&&o.getAttribute("id")==n.getAttribute("targetId"))break;ae=!1,n.classList.remove("visible"),te=!1,ne=0,oe=0}}}function z(){var e=document.getElementsByClassName("atv");if(e)for(var t=0;t<e.length;t++){var n=e[t],o=n.previousElementSibling.previousElementSibling.innerHTML;"id"!=o&&"item-descriptor"!=o&&n.addEventListener("click",q)}}function R(){var e=setInterval(function(){var t=document.getElementsByClassName("atn");if(t[0]){clearInterval(e);for(var n=0;n<t.length;n++){var o=t[n];if("item-descriptor"==o.innerText){var a=o.nextElementSibling.nextElementSibling.innerHTML.replace(/\"/g,""),i=o.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling;if("id"==i.innerText){var r=i.nextElementSibling.nextElementSibling.innerText.replace(/\"/g,"");o.classList.add("itenDescAutoComplete");var l='<div class="itemDescActions" data-id="'+r+'" data-itemdesc="'+a+'">';l+='<div id="remove_'+r+'">remove</div>',l+='<div id="update_'+r+'">update</div>',l+='<div id="print_'+r+'">print</div>',l+="</div>",o.innerHTML+=l,document.getElementById("remove_"+r).addEventListener("click",V),document.getElementById("update_"+r).addEventListener("click",Q),document.getElementById("print_"+r).addEventListener("click",W)}}}}},300)}function V(){var e=event.target.parentElement,t=e.getAttribute("data-id"),n='<remove-item item-descriptor="'+e.getAttribute("data-itemdesc")+'" id="'+t+'"/>',o=document.getElementsByTagName("textarea")[0];if(o){var a="\n";a+=n,o.value+=a,o.focus()}}function Q(){var e=event.target.parentElement,t=e.getAttribute("data-id"),n='<update-item item-descriptor="'+e.getAttribute("data-itemdesc")+'" id="'+t+'">';n+='\n\t<set-property name=""><![CDATA[]]></set-property>',n+="\n</update-item>";var o=document.getElementsByTagName("textarea")[0];if(o){var a="\n";a+=n,o.value+=a,o.focus()}}function W(){var e=event.target.parentElement,t=e.getAttribute("data-id"),n='<print-item item-descriptor="'+e.getAttribute("data-itemdesc")+'" id="'+t+'"/>',o=document.getElementsByTagName("textarea")[0];if(o){var a="\n";a+=n,o.value+=a,o.focus()}}function q(){var e=event.target,t=e.nextElementSibling.nextElementSibling;if(t){var n=document.getElementsByTagName("textarea")[0];if(n){var o=n.value;o+="\n";var a=F(t.innerText);if(a.indexOf(",")>0)for(var i=a.split(","),r=0;r<i.length;r++)o+="<print-item item-descriptor="+e.innerText+' id="'+i[r]+'"/>',o+="\n";else o+="<print-item item-descriptor="+e.innerText+' id="'+a+'"/>';n.value=o,n.focus()}}}function F(e){return e.replace("<![CDATA[","").replace("]]>","")}function K(){return location.pathname.endsWith("/")?location.pathname:location.pathname+"/"}function U(){var t=document.createElement("style");t.type="text/css";var n="1";e.innerWidth<2e3&&(n="0.8"),e.innerWidth<=1440&&(n="0.7");var o=".dynamoToolsBox{position:fixed;top:0;right:-1px;width:500px;background-color:#545454;border:3px solid #545454;overflow:hidden;zoom:"+n+"}.dynamoToolsBox h3{color:#fff;text-align:center;margin:10px}.dynamoToolsBox .navigation{position:absolute;top:0;background-color:#696969;cursor:pointer;width:41px;height:41px;text-align:center;vertical-align:middle;line-height:41px}.dynamoToolsBox .remove{right:0}.dynamoToolsBox .toogle{right:42px}.dynamoToolsBox ul{list-style:none;margin:0;padding:0}.dynamoToolsBox li{border-bottom:2px solid #dcdcdc;background-color:#fdfdfd;display:inline-block;width:100%;padding:10px}.dynamoToolsBox .hide{display:none}.dynamoToolsBox .info label{float:left;font-weight:700}.dynamoToolsBox .info div{float:left}.dynamoToolsBox .green{background-color:#abffa5}.dynamoToolsBox .red{background-color:red}.dynamoToolsBox .info h3{color:#2d2d2d;font-size:20px;margin:0}.dynamoToolsBox .execute label{float:left;font-weight:700}.dynamoToolsBox .execute div{float:left}pre.prettyprint{padding:0!important;border:0!important}.dynamoToolsBox .copyright p{padding:0;font-size:11px;margin:0;text-align:right;padding-right:20px}.atv{cursor:pointer}.dynamoToolsBox .autocomplete{background-color:#eaeaea;width:95%;border:1px solid #c1c1c1;border-top:0;overflow:hidden;display:none}.dynamoToolsBox .autocomplete.visible{display:block}.dynamoToolsBox .autocomplete span{width:100%;display:inline-block;padding:3px}.dynamoToolsBox .autocomplete span.active{background-color:#fff;color:#009}.itemDescActions{display:none;position:absolute;background:#fff;border:1px solid #898989;width:106px;left:79px;text-transform:capitalize;cursor:pointer}.itemDescActions div{padding:3px;color:#000}.itemDescActions div:hover{background-color:#f3f3f3}.itenDescAutoComplete:hover .itemDescActions{display:block}.dynamoToolsBox .favorites{background-color:#ececec;padding-top:0}.dynamoToolsBox .favorites a{width:100%;display:inline-block;padding:5px 0}";t.styleSheet?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o)),document.getElementsByTagName("head")[0].appendChild(t)}function G(){"true"==$.getItem("minimizedToolBox")&&document.getElementById("contentToolsBox").classList.add("hide")}function X(){if(/cmpn-search.jhtml/.test(location.pathname)){var e=document.getElementsByTagName("a");if(e)for(var t=0;t<e.length;t++){var n=e[t];/\/\//.test(n.getAttribute("href"))&&n.setAttribute("href",n.getAttribute("href").replace("//","/"))}}}function J(){var e="favoriteLinks";w("LI",e,"favorites","","contentToolsBox");var n=0,o=setInterval(function(){if(n++,t.favorites){clearInterval(o);for(var a="",i=0;i<t.favorites.length;i++){var r=t.favorites[i];a+='<a href="/dyn/admin/nucleus'+r+'">'+r+"</a>"}document.getElementById(e).innerHTML=a}n>10&&clearInterval(o)},300)}function Y(){/jdbcbrowser\/executeQuery.jhtml/.test(location.pathname)&&(c(),o(),ie=!0)}function Z(){/\/nucleus\//.test(location.pathname)&&(h(),f(),p()),/\/nucleus\/.*Repository|.*Catalog/.test(location.pathname)&&(y(),s(),m(),v(),u(),o(),D(),M())}e.console&&console.info&&console.info(CONSTANTS.welcomeMessage);var $={_data:{},setItem:function(e,t){return this._data[e]=String(t)},getItem:function(e){return this._data.hasOwnProperty(e)?this._data[e]:void 0},removeItem:function(e){return delete this._data[e]},clear:function(){return this._data={}}};localStorage&&($=localStorage);var ee=[],te=!1,ne=0,oe=0,ae=!1,ie=!1;a(),r(),G(),U(),l(),T(),x(),Y(),Z(),A(),J(),d(),X()}(window,unsafeWindow,DynamoToolBox);